


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > NotesView</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">main.java.view</a>
</div>

<h1>Coverage Summary for Class: NotesView (main.java.view)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">NotesView</td>
<td class="coverageStat">
  <span class="percent">
    55.6%
  </span>
  <span class="absValue">
    (5/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    73.8%
  </span>
  <span class="absValue">
    (76/103)
  </span>
</td>
</tr>
  <tr>
    <td class="name">NotesView$1</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    20%
  </span>
  <span class="absValue">
    (1/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$10</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    12.5%
  </span>
  <span class="absValue">
    (1/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$11</td>
<td class="coverageStat">
  <span class="percent">
    25%
  </span>
  <span class="absValue">
    (1/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    16.7%
  </span>
  <span class="absValue">
    (1/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$2</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    9.1%
  </span>
  <span class="absValue">
    (1/11)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$3</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    9.1%
  </span>
  <span class="absValue">
    (1/11)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$4</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (8/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$5</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$6</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    3.2%
  </span>
  <span class="absValue">
    (1/31)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$6$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$6$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$7</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    25%
  </span>
  <span class="absValue">
    (1/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$8</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    7.7%
  </span>
  <span class="absValue">
    (1/13)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">NotesView$9</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    14.3%
  </span>
  <span class="absValue">
    (1/7)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    43.9%
  </span>
  <span class="absValue">
    (18/41)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    44.2%
  </span>
  <span class="absValue">
    (100/226)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package main.java.view;
&nbsp;
&nbsp;import main.java.app.Constants;
&nbsp;import main.java.entity.Notes;
&nbsp;import main.java.interface_adapter.add_Question_Definition.DefQuesController;
&nbsp;import main.java.interface_adapter.add_course.AddCourseController;
&nbsp;import main.java.interface_adapter.notes.*;
&nbsp;import main.java.interface_adapter.ViewManagerModel;
&nbsp;import main.java.interface_adapter.quiz.QuizController;
&nbsp;
&nbsp;import javax.swing.*;
&nbsp;import javax.swing.event.*;
&nbsp;import java.awt.*;
&nbsp;import java.awt.event.*;
&nbsp;import java.beans.PropertyChangeEvent;
&nbsp;import java.beans.PropertyChangeListener;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.Map;
&nbsp;
<b class="nc">&nbsp;public class NotesView extends JPanel implements ActionListener, PropertyChangeListener {</b>
<b class="fc">&nbsp;    public final String viewName = &quot;Notes&quot;;</b>
&nbsp;    private final NotesViewModel notesViewModel;
&nbsp;    private final ViewManagerModel viewManagerModel;
&nbsp;    private final JLabel notesDisplay;
&nbsp;
&nbsp;    public final JTabbedPane coursesDisplay;
&nbsp;    private final AddCourseController addCourseController;
&nbsp;    private final CreateNotesController createNotesController;
&nbsp;    private final DeleteNotesController deleteNotesController;
&nbsp;    private final DefQuesController defQuesController;
&nbsp;
&nbsp;    private final JButton markAsDefinition;
&nbsp;    private final JButton markAsQuestion;
&nbsp;
&nbsp;    // used to debug
&nbsp;
&nbsp;    public NotesView(NotesViewModel notesViewModel,
&nbsp;                     ViewManagerModel viewManagerModel,
&nbsp;                     AddCourseController addCourseController,
&nbsp;                     CreateNotesController createNotesController,
&nbsp;                     QuizController quizController, DefQuesController defQuesController,
&nbsp;                     DeleteNotesController deleteNotesController) {
<b class="fc">&nbsp;        super(new BorderLayout());</b>
<b class="fc">&nbsp;        this.notesViewModel = notesViewModel;</b>
<b class="fc">&nbsp;        this.viewManagerModel = viewManagerModel;</b>
<b class="fc">&nbsp;        this.createNotesController = createNotesController;</b>
<b class="fc">&nbsp;        this.deleteNotesController = deleteNotesController;</b>
<b class="fc">&nbsp;        this.defQuesController = defQuesController;</b>
<b class="fc">&nbsp;        this.notesViewModel.addPropertyChangeListener(this);</b>
&nbsp;//        this.viewManagerModel.addPropertyChangeListener(this);
<b class="fc">&nbsp;        this.addCourseController = addCourseController;</b>
<b class="fc">&nbsp;        this.notesDisplay = new JLabel(&quot;Notes&quot;);</b>
<b class="fc">&nbsp;        this.coursesDisplay = new JTabbedPane();</b>
<b class="fc">&nbsp;        coursesDisplay.setTabPlacement(JTabbedPane.TOP);</b>
&nbsp;
<b class="fc">&nbsp;        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.LEADING));</b>
&nbsp;
<b class="fc">&nbsp;        JLabel title = new JLabel(Constants.NOTES_VIEWNAME);</b>
&nbsp;
<b class="fc">&nbsp;        JButton back = new JButton(notesViewModel.BACK_BUTTON_LABEL);</b>
&nbsp;
<b class="fc">&nbsp;        JButton addCourse = new JButton(&quot;Add Course&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        JButton addNotes = new JButton(&quot;+&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        JButton saveNotes = new JButton(&quot;Save&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        JButton deleteNotes = new JButton(&quot;Delete&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        JButton generateQuiz = new JButton(&quot;Generate Quiz&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        this.markAsDefinition = new JButton(&quot;Mark as Definition&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        this.markAsQuestion = new JButton(&quot;Mark as Question&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        generateQuiz.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                if (e.getSource().equals(generateQuiz)) {</b>
<b class="nc">&nbsp;                    int activeIndex = coursesDisplay.getSelectedIndex();</b>
<b class="nc">&nbsp;                    String courseId = coursesDisplay.getTitleAt(activeIndex);  //checks what course currently on</b>
<b class="nc">&nbsp;                    quizController.execute(courseId);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="fc">&nbsp;        markAsDefinition.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                int activeIndex = coursesDisplay.getSelectedIndex();</b>
<b class="nc">&nbsp;                String courseId = coursesDisplay.getTitleAt(activeIndex);</b>
<b class="nc">&nbsp;                JPanel panel = (JPanel) NotesView.this.coursesDisplay.getSelectedComponent();</b>
<b class="nc">&nbsp;                JSplitPane scrollPane = (JSplitPane) panel.getComponent(0);</b>
<b class="nc">&nbsp;                JScrollPane notePad = (JScrollPane) scrollPane.getRightComponent();</b>
<b class="nc">&nbsp;                JTextPane textPane = (JTextPane) notePad.getViewport().getView();</b>
&nbsp;
<b class="nc">&nbsp;                if (e.getSource().equals(markAsDefinition)){</b>
<b class="nc">&nbsp;                    String potDefinition = textPane.getSelectedText();</b>
<b class="nc">&nbsp;                    String[] components = splitHighlightedText(potDefinition, &quot;:&quot;);</b>
<b class="nc">&nbsp;                    defQuesController.execute(components[0], components[1], courseId, &quot;:&quot;);</b>
&nbsp;                }
&nbsp;
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="fc">&nbsp;        markAsQuestion.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                int activeIndex = coursesDisplay.getSelectedIndex();</b>
<b class="nc">&nbsp;                String courseId = coursesDisplay.getTitleAt(activeIndex);</b>
<b class="nc">&nbsp;                JPanel panel = (JPanel) NotesView.this.coursesDisplay.getSelectedComponent();</b>
<b class="nc">&nbsp;                JSplitPane scrollPane = (JSplitPane) panel.getComponent(0);</b>
<b class="nc">&nbsp;                JScrollPane notePad = (JScrollPane) scrollPane.getRightComponent();</b>
<b class="nc">&nbsp;                JTextPane textPane = (JTextPane) notePad.getViewport().getView();</b>
&nbsp;
<b class="nc">&nbsp;                if (e.getSource().equals(markAsQuestion)){</b>
<b class="nc">&nbsp;                    String potQuestion = textPane.getSelectedText();</b>
<b class="nc">&nbsp;                    String[] components = splitHighlightedText(potQuestion, &quot;?&quot;);</b>
<b class="nc">&nbsp;                    defQuesController.execute(components[0], components[1], courseId, &quot;?&quot;);</b>
&nbsp;                }
&nbsp;
&nbsp;            }
&nbsp;
&nbsp;
&nbsp;        });
&nbsp;
<b class="fc">&nbsp;        addCourse.addActionListener(</b>
<b class="fc">&nbsp;                new ActionListener() {</b>
&nbsp;                    @Override
&nbsp;                    public void actionPerformed(ActionEvent e) {
<b class="fc">&nbsp;                        if (e.getSource().equals(addCourse)) {</b>
&nbsp;//                            Icon defaultIcon = UIManager.getIcon(&quot;OptionPane.questionIcon&quot;);
<b class="fc">&nbsp;                            String courseID = (String)JOptionPane.showInputDialog(</b>
&nbsp;                                    NotesView.this,
&nbsp;                                    &quot;Course ID: \n&quot;,
&nbsp;                                    &quot;Dialog&quot;,
&nbsp;                                    JOptionPane.INFORMATION_MESSAGE,
&nbsp;                                    null, // TODO: For Jerry: change this Icon
&nbsp;                                    null,
&nbsp;                                    &quot;&quot;);
<b class="fc">&nbsp;                            NotesState currentstate = notesViewModel.getState();</b>
<b class="fc">&nbsp;                            currentstate.setSelectedcourse(courseID);</b>
<b class="fc">&nbsp;                            notesViewModel.setState(currentstate);</b>
<b class="fc">&nbsp;                            if (courseID != null) {</b>
<b class="fc">&nbsp;                                addCourseController.execute(courseID);</b>
&nbsp;                            }
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
&nbsp;
&nbsp;        );
&nbsp;
<b class="fc">&nbsp;        coursesDisplay.addChangeListener(new ChangeListener() {</b>
&nbsp;            @Override
&nbsp;            public void stateChanged(ChangeEvent e) {
<b class="fc">&nbsp;                int selectedIndex = coursesDisplay.getSelectedIndex();</b>
&nbsp;
<b class="fc">&nbsp;                if (selectedIndex &gt;= 0) {</b>
<b class="fc">&nbsp;                    String selectedTabTitle = coursesDisplay.getTitleAt(selectedIndex);</b>
&nbsp;
<b class="fc">&nbsp;                    NotesState currentstate = notesViewModel.getState();</b>
<b class="fc">&nbsp;                    currentstate.setSelectedcourse(selectedTabTitle);</b>
<b class="fc">&nbsp;                    notesViewModel.setState(currentstate);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="fc">&nbsp;        addNotes.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                if (e.getSource().equals(addNotes)){</b>
<b class="nc">&nbsp;                    JTextField notesTitle = new JTextField(null, 10);</b>
<b class="nc">&nbsp;                    JTextField chapterNo = new JTextField(null, 3);</b>
<b class="nc">&nbsp;                    JTextField notesContent = new JTextField(null,15);</b>
<b class="nc">&nbsp;                    JPanel title = new JPanel();</b>
<b class="nc">&nbsp;                    title.add(new JLabel(&quot;Topic&quot;));</b>
<b class="nc">&nbsp;                    title.add(notesTitle);</b>
<b class="nc">&nbsp;                    title.add(new JLabel(&quot;#&quot;));</b>
<b class="nc">&nbsp;                    title.add(chapterNo);</b>
<b class="nc">&nbsp;                    JPanel content = new JPanel();</b>
<b class="nc">&nbsp;                    content.add(notesContent);</b>
<b class="nc">&nbsp;                    notesTitle.addKeyListener(new KeyListener() {</b>
&nbsp;                        @Override
&nbsp;                        public void keyTyped(KeyEvent e) {
<b class="nc">&nbsp;                            NotesState currentState = notesViewModel.getState();</b>
<b class="nc">&nbsp;                            currentState.setNotesTitle(notesTitle.getText() + e.getKeyChar());</b>
<b class="nc">&nbsp;                            notesViewModel.setState(currentState);</b>
&nbsp;                        }
&nbsp;
&nbsp;                        @Override
&nbsp;                        public void keyPressed(KeyEvent e) {
<b class="nc">&nbsp;                        }</b>
&nbsp;
&nbsp;                        @Override
&nbsp;                        public void keyReleased(KeyEvent e) {
<b class="nc">&nbsp;                        }</b>
&nbsp;                    });
<b class="nc">&nbsp;                    chapterNo.addKeyListener(new KeyListener() {</b>
&nbsp;                        @Override
&nbsp;                        public void keyTyped(KeyEvent e) {
<b class="nc">&nbsp;                            NotesState currentState = notesViewModel.getState();</b>
<b class="nc">&nbsp;                            currentState.setChapterNo(chapterNo.getText() + e.getKeyChar());</b>
<b class="nc">&nbsp;                            notesViewModel.setState(currentState);</b>
&nbsp;                        }
&nbsp;
&nbsp;                        @Override
&nbsp;                        public void keyPressed(KeyEvent e) {
<b class="nc">&nbsp;                        }</b>
&nbsp;
&nbsp;                        @Override
&nbsp;                        public void keyReleased(KeyEvent e) {
<b class="nc">&nbsp;                        }</b>
&nbsp;                    });
&nbsp;
<b class="nc">&nbsp;                    int result = JOptionPane.showConfirmDialog(null, title, &quot;Topic&quot;,</b>
&nbsp;                            JOptionPane.OK_CANCEL_OPTION);
<b class="nc">&nbsp;                    if (result == JOptionPane.OK_OPTION){</b>
<b class="nc">&nbsp;                        NotesState currentstate = notesViewModel.getState();</b>
<b class="nc">&nbsp;                        int errorResult = 0;</b>
<b class="nc">&nbsp;                        for (String course : currentstate.getCourses()){</b>
<b class="nc">&nbsp;                            for(Notes notes : currentstate.getAllNotes().get(course)){</b>
<b class="nc">&nbsp;                                if (notes.getTitle().equals(currentstate.getNotesTitle())){</b>
<b class="nc">&nbsp;                                    errorResult += 1;</b>
&nbsp;                                }
<b class="nc">&nbsp;                            }</b>
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                        if (errorResult &gt; 0){</b>
<b class="nc">&nbsp;                            JOptionPane.showMessageDialog(null,</b>
&nbsp;                                    &quot;Note already exists. Please enter different title.&quot;
&nbsp;                                    , &quot;Warning&quot;, JOptionPane.ERROR_MESSAGE);
&nbsp;                        }else {
<b class="nc">&nbsp;                            if (currentstate.getNotesContent().isEmpty()) {</b>
<b class="nc">&nbsp;                                currentstate.setNotesContent(&quot; &quot;);</b>
&nbsp;                            }
<b class="nc">&nbsp;                            createNotesController.execute(currentstate.getNotesTitle(), &quot;&quot;,</b>
<b class="nc">&nbsp;                                    currentstate.getSelectedCourse(), Integer.parseInt(currentstate.getChapterNo()));</b>
<b class="nc">&nbsp;                            setNotesDisplay(currentstate);</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
&nbsp;
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="fc">&nbsp;        back.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                if (e.getSource().equals(back)) {</b>
<b class="nc">&nbsp;                    viewManagerModel.setActiveView(Constants.HOME_VIEWNAME);</b>
<b class="nc">&nbsp;                    viewManagerModel.firePropertyChanged();</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
<b class="fc">&nbsp;        deleteNotes.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                if (e.getSource().equals(deleteNotes)) {</b>
<b class="nc">&nbsp;                    int result = JOptionPane.showConfirmDialog(null, &quot;Are you sure you want to delete this note?&quot;,</b>
&nbsp;                            &quot;Warning&quot;, JOptionPane.OK_CANCEL_OPTION);
<b class="nc">&nbsp;                    if (result == JOptionPane.OK_OPTION) {</b>
<b class="nc">&nbsp;                        NotesState currentstate = notesViewModel.getState();</b>
<b class="nc">&nbsp;                        Notes tbd = null;</b>
<b class="nc">&nbsp;                        for(Notes note : currentstate.getAllNotes().get(currentstate.getSelectedCourse())){</b>
<b class="nc">&nbsp;                            if (currentstate.getNotesTitle().equals(note.getTitle())){</b>
<b class="nc">&nbsp;                                tbd = note;</b>
&nbsp;                            }
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                        currentstate.getAllNotes().get(currentstate.getSelectedCourse()).remove(tbd);</b>
<b class="nc">&nbsp;                        deleteNotesController.execute(currentstate.getNotesTitle(), currentstate.getSelectedCourse(), tbd);</b>
<b class="nc">&nbsp;                        setNotesDisplay(currentstate);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        });
<b class="fc">&nbsp;        saveNotes.addActionListener(new ActionListener() {</b>
&nbsp;            @Override
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                if (e.getSource().equals(saveNotes)) {</b>
<b class="nc">&nbsp;                    NotesState currentstate = notesViewModel.getState();</b>
<b class="nc">&nbsp;                    if(currentstate.getAllTopics().get(currentstate.getSelectedCourse()).contains(currentstate.getNotesTitle())){</b>
<b class="nc">&nbsp;                        createNotesController.execute(currentstate.getNotesTitle(), currentstate.getNotesContent(),</b>
<b class="nc">&nbsp;                                currentstate.getSelectedCourse(), true);</b>
&nbsp;                    }else{
<b class="nc">&nbsp;                        JOptionPane.showMessageDialog(null,</b>
&nbsp;                                &quot;Please select a note.&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        });
<b class="fc">&nbsp;        buttonPanel.add(title);</b>
<b class="fc">&nbsp;        buttonPanel.add(addCourse);</b>
<b class="fc">&nbsp;        buttonPanel.add(addNotes);</b>
<b class="fc">&nbsp;        buttonPanel.add(generateQuiz);</b>
<b class="fc">&nbsp;        buttonPanel.add(back);</b>
<b class="fc">&nbsp;        buttonPanel.add(saveNotes);</b>
<b class="fc">&nbsp;        buttonPanel.add(deleteNotes);</b>
<b class="fc">&nbsp;        buttonPanel.add(markAsDefinition);</b>
<b class="fc">&nbsp;        buttonPanel.add(markAsQuestion);</b>
&nbsp;
<b class="fc">&nbsp;        this.add(buttonPanel, BorderLayout.NORTH);</b>
&nbsp;
<b class="fc">&nbsp;        this.add(coursesDisplay, BorderLayout.CENTER);</b>
<b class="fc">&nbsp;        this.add(coursesDisplay);</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void actionPerformed(ActionEvent e) {
&nbsp;
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    @Override
&nbsp;    public void propertyChange(PropertyChangeEvent evt) {
<b class="fc">&nbsp;        NotesState state = (NotesState) evt.getNewValue();</b>
<b class="fc">&nbsp;        if (evt.getPropertyName().equals(Constants.STATE_PROPNAME)) {</b>
<b class="fc">&nbsp;            setNotesDisplay(state);</b>
<b class="fc">&nbsp;        } else if (evt.getPropertyName().equals(Constants.COURSES_PROPNAME)) {</b>
<b class="fc">&nbsp;            setCoursesDisplay(state);</b>
<b class="nc">&nbsp;        } else if (evt.getPropertyName().equals(Constants.ADD_COURSE_ERROR)) {</b>
<b class="nc">&nbsp;            JOptionPane.showMessageDialog(this, Constants.ADD_COURSE_ERROR);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private void setCoursesDisplay(NotesState state) {
<b class="fc">&nbsp;        this.coursesDisplay.removeAll();</b>
<b class="fc">&nbsp;        for (String course : state.getCourses()) {</b>
<b class="fc">&nbsp;            coursesDisplay.addTab(course, getTab(course));</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        this.coursesDisplay.revalidate();</b>
<b class="fc">&nbsp;        this.coursesDisplay.repaint();</b>
&nbsp;    }
&nbsp;
&nbsp;    private JPanel getTab(String course) {
<b class="fc">&nbsp;        JPanel tabPanel = new JPanel(new BorderLayout());</b>
<b class="fc">&nbsp;        JEditorPane notePad = new JTextPane();</b>
<b class="fc">&nbsp;        JScrollPane textArea = new JScrollPane(notePad);</b>
<b class="fc">&nbsp;        NotesState currentState = notesViewModel.getState();</b>
&nbsp;//        tabPanel.add(notePad);
&nbsp;
<b class="fc">&nbsp;        ArrayList&lt;String&gt; topics = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        Map&lt;String, String&gt; content = new HashMap&lt;&gt;();</b>
<b class="fc">&nbsp;        if ((currentState.getAllNotes() != null) &amp;&amp; !(currentState.getAllNotes().isEmpty()) &amp;&amp; !(currentState.getAllNotes().get(course) == null)) {</b>
<b class="fc">&nbsp;            for (Notes note : currentState.getAllNotes().get(course)) {</b>
<b class="nc">&nbsp;                topics.add(note.getTitle());</b>
<b class="nc">&nbsp;                content.put(note.getTitle(), note.getContents());</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="fc">&nbsp;        String[] t = topics.toArray(new String[]{});</b>
<b class="fc">&nbsp;        JList&lt;String&gt; topicsList = new JList&lt;&gt;(t);</b>
&nbsp;
<b class="fc">&nbsp;        topicsList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);</b>
&nbsp;
<b class="fc">&nbsp;        topicsList.addListSelectionListener(new ListSelectionListener() {</b>
&nbsp;            @Override
&nbsp;            public void valueChanged(ListSelectionEvent e) {
&nbsp;                // Handle selection change here
<b class="nc">&nbsp;                if (!e.getValueIsAdjusting()) {</b>
<b class="nc">&nbsp;                    String selectedTopic = topicsList.getSelectedValue();</b>
<b class="nc">&nbsp;                    content.remove(currentState.getNotesTitle());</b>
<b class="nc">&nbsp;                    content.put(currentState.getNotesTitle(), currentState.getNotesContent());</b>
<b class="nc">&nbsp;                    currentState.setNotesTitle(selectedTopic);</b>
<b class="nc">&nbsp;                    currentState.setNotesContent(content.get(selectedTopic));</b>
<b class="nc">&nbsp;                    updateNotePad(content.get(selectedTopic),notePad);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
<b class="fc">&nbsp;        notePad.addKeyListener(new KeyListener() {</b>
&nbsp;            @Override
&nbsp;            public void keyTyped(KeyEvent e) {
<b class="nc">&nbsp;                NotesState currentState = notesViewModel.getState();</b>
<b class="nc">&nbsp;                currentState.setNotesContent(notePad.getText() + e.getKeyChar());</b>
<b class="nc">&nbsp;                notesViewModel.setState(currentState);</b>
&nbsp;            }
&nbsp;
&nbsp;            @Override
&nbsp;            public void keyPressed(KeyEvent e) {
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            @Override
&nbsp;            public void keyReleased(KeyEvent e) {
<b class="nc">&nbsp;            }</b>
&nbsp;        });
&nbsp;
<b class="fc">&nbsp;        JScrollPane noteTopics = new JScrollPane(topicsList);</b>
&nbsp;
<b class="fc">&nbsp;        JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, noteTopics, textArea);</b>
&nbsp;
<b class="fc">&nbsp;        splitPane.setDividerLocation(Constants.NOTE_TOPICS_SIZE); // This sets the divider at 1/6th of the width of the split pane</b>
<b class="fc">&nbsp;        splitPane.setResizeWeight(Constants.NOTE_TOPICS_SIZE);</b>
&nbsp;
<b class="fc">&nbsp;        tabPanel.add(splitPane, BorderLayout.CENTER);</b>
<b class="fc">&nbsp;        return tabPanel;</b>
&nbsp;    }
&nbsp;
&nbsp;    private String[] splitHighlightedText(String text, String symbol){
<b class="nc">&nbsp;        String[] components = new String[2];</b>
&nbsp;        int indexOfColon;
<b class="nc">&nbsp;        if (text == null){</b>
<b class="nc">&nbsp;            indexOfColon = -1;</b>
&nbsp;        }else{
<b class="nc">&nbsp;            indexOfColon = text.indexOf(symbol);}</b>
<b class="nc">&nbsp;        if (indexOfColon == -1){</b>
<b class="nc">&nbsp;            components[0] = &quot;&quot;;</b>
<b class="nc">&nbsp;            components[1] = &quot;&quot;;</b>
&nbsp;        } else { //colon exists, find it!
<b class="nc">&nbsp;            String before = text.substring(0, indexOfColon);</b>
<b class="nc">&nbsp;            String after = text.substring(indexOfColon + 1);</b>
<b class="nc">&nbsp;            String regex = &quot;\\s*&quot;;</b>
<b class="nc">&nbsp;            if (before.matches(regex)){</b>
<b class="nc">&nbsp;                components[0] = &quot;&quot;;</b>
&nbsp;            }else{
<b class="nc">&nbsp;                components[0] = before;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (after.matches(regex)){</b>
<b class="nc">&nbsp;                components[1] = &quot;&quot;;</b>
&nbsp;            }else{
<b class="nc">&nbsp;                components[1] = after;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return components;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void setNotesDisplay(NotesState state) {
<b class="fc">&nbsp;        ArrayList&lt;String&gt; courses = state.getCourses();</b>
<b class="fc">&nbsp;        this.coursesDisplay.removeAll();</b>
<b class="fc">&nbsp;        for (String course : courses) {</b>
<b class="nc">&nbsp;            coursesDisplay.addTab(course, getTab(course));</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    private void updateNotePad(String selectedTopic, JEditorPane notePad) {
<b class="nc">&nbsp;        notePad.setText(selectedTopic);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;}
&nbsp;
&nbsp;
&nbsp;
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-12-07 18:42</div>
</div>
</body>
</html>
